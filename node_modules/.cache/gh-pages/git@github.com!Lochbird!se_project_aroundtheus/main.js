!function(){"use strict";class e{constructor(e,t,s,i,n){let{name:r,link:o,_id:a,isLiked:l}=e,{handleImageClick:d}=s;this._name=r,this._link=o,this._id=a,this._isLiked=l,this._cardSelector=t,this._handleImageClick=d,this._handleDeleteCardSubmit=i,this._toggleLikeCard=n}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardLikeBtn=this._cardElement.querySelector(".card__like-button"),this._cardDeleteBtn=this._cardElement.querySelector(".card__delete-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._handleLikes(),this._setEventListeners(),this._cardElement}_setEventListeners(){this._cardLikeBtn.addEventListener("click",(()=>{this._handleLikeClick()})),this._cardDeleteBtn.addEventListener("click",(()=>{this._handleDeleteCardSubmit(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this)}))}toggleLikeButton(){this._cardLikeBtn.classList.toggle("card__like-button_active")}_handleLikeClick(){this._toggleLikeCard(this)}deleteCard(){this._cardElement.remove(),this._cardElement=null}_handleLikes(){this._isLiked?this._cardLikeBtn.classList.add("card__like-button_active"):this._cardLikeBtn.classList.remove("card__like-button_active")}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}}class s{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._classElement=t}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._classElement.append(e)}}class i{constructor(e){let{popupElement:t}=e;this._popupElement=t}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}class n extends i{constructor(e,t){super({popupElement:e}),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupElement.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent,this._inputs=this._popupForm.querySelectorAll(".modal__input")}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e={};return this._inputs.forEach((t=>e[t.name]=t.value)),e}setInputValues(e){this._inputs.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}isLoading(e,t){this._submitButton.textContent=e?t:this._submitButtonText}}const r={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},o=document.querySelector("#profile-edit-button"),a=document.querySelector("#edit-profile-modal"),l=document.forms["edit-profile-form"],d=document.querySelector(".profile__title"),c=document.querySelector(".profile__description"),h=document.querySelector(".profile__image"),u=document.querySelector(".profile__image-edit"),_=document.querySelector("#edit-profile-image-modal"),m=document.querySelector("#delete-modal"),p=document.querySelector(".cards__list"),E=document.querySelector("#add-card-modal"),g=document.forms["add-card-modal-form"],b=document.querySelector("#profile-add-button"),f=document.querySelector("#preview-image-modal");function L(t){const s=function(t){return new e(t,"#card-template",{handleImageClick:()=>U.open(t)},k,v).getView()}(t);return S.addItem(s)}function v(e){e._isLiked?C.removeLikeCard(e._id).then((()=>{e.toggleLikeButton()})):C.addLikeCard(e._id).then((()=>{e.toggleLikeButton()}))}function k(e){B.open(),B.setSubmitCallback((()=>{B.isLoading(!0,"Saving..."),C.deleteCard(e).then((()=>{e.deleteCard(),B.close()})).catch((e=>{console.error(e)})).finally((()=>B.isLoading(!1)))}))}o.addEventListener("click",(()=>{w.toggleButtonState();const e=I.getUserInfo();q.setInputValues(e),q.open()})),b.addEventListener("click",(()=>{$.toggleButtonState(),x.open()})),u.addEventListener("click",(()=>{y.open()}));const C=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>this._checkResponse(e)))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then((e=>this._checkResponse(e)))}editUserInfo(e){let{title:t,description:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then((e=>this._checkResponse(e)))}addCard(e){let{title:t,url:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then((e=>this._checkResponse(e)))}deleteCard(e){let{_id:t}=e;return fetch(`${this._baseUrl}/cards/${t}`,{method:"DELETE",headers:this._headers}).then((e=>this._checkResponse(e)))}addLikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then((e=>this._checkResponse(e)))}removeLikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then((e=>this._checkResponse(e)))}editProfileImage(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>this._checkResponse(e)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"ba6f95f2-7e3a-4192-b9e4-9397fc618de9","Content-Type":"application/json"}});let S;C.getInitialCards().then((e=>{S=new s({items:e,renderer:L},p),S.renderItems()})).catch((e=>{console.error(e)})),C.getUserInfo().then((e=>{C.editUserInfo({title:e.name,description:e.about}),I.setUserInfo(e),I.setProfileImage(e.avatar)})).catch((e=>{console.error(e)}));const y=new n(_,(function(e){y.isLoading(!0,"Saving..."),C.editProfileImage(e.url).then((e=>{I.setProfileImage(e.avatar)})).catch((e=>{console.error(e)})).finally((()=>{y.isLoading(!1),y.close()}))})),I=new class{constructor(e,t,s){this._title=e,this._description=t,this._profileImage=s}getUserInfo(){return{title:this._title.textContent,description:this._description.textContent}}setUserInfo(e){this._title.textContent=e.name,this._description.textContent=e.about}getProfileImage(){return this._profileImage.src}setProfileImage(e){this._profileImage.src=e}}(d,c,h),B=new class extends i{constructor(e,t){super({popupElement:e}),this._submitButton=this._popupElement.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent,this._handleDeleteCardSubmit=t}setSubmitCallback(e){this._handleSubmitCallback=e}setEventListeners(){this._submitButton.addEventListener("click",(e=>{e.preventDefault(),this._handleSubmitCallback()})),super.setEventListeners()}isLoading(e,t){this._submitButton.textContent=e?t:this._submitButtonText}}(m,k),q=new n(a,(function(e){q.isLoading(!0,"Saving..."),C.editUserInfo(e).then((e=>{I.setUserInfo(e),q.close()})).catch((e=>{console.error(e)})).finally((()=>q.isLoading(!1)))})),U=new class extends i{constructor(e){super({popupElement:e}),this._imageElement=this._popupElement.querySelector(".card__image"),this._titleElement=this._popupElement.querySelector(".modal__paragraph")}open(e){super.open(),this._imageElement.src=e.link,this._imageElement.alt=e.name,this._titleElement.textContent=e.name}}(f),x=new n(E,(function(e){x.isLoading(!0,"Saving..."),C.addCard(e).then((e=>{L(e)})).catch((e=>{console.error(e)})).finally((()=>{x.close(),x.isLoading(!1)}))})),w=new t(r,l),$=new t(r,g);q.setEventListeners(),y.setEventListeners(),U.setEventListeners(),x.setEventListeners(),B.setEventListeners(),w.enableValidation(),$.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUJoRyxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWQgfSwgY2FyZFNlbGVjdG9yLFxyXG4gICAgeyBoYW5kbGVJbWFnZUNsaWNrIH0sIGhhbmRsZURlbGV0ZUNhcmRTdWJtaXQsIHRvZ2dsZUxpa2VDYXJkKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5faWQgPSBfaWQ7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZFN1Ym1pdCA9IGhhbmRsZURlbGV0ZUNhcmRTdWJtaXQ7XHJcbiAgICB0aGlzLl90b2dnbGVMaWtlQ2FyZCA9IHRvZ2dsZUxpa2VDYXJkO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5faGFuZGxlTGlrZXMoKTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljaygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkU3VibWl0KHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUxpa2VCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpXHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUNsaWNrKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlTGlrZUNhcmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZXMoKSB7XHJcbiAgICAgIGlmKHRoaXMuX2lzTGlrZWQpIHtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZUJ0bi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX2NhcmRMaWtlQnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgIH1cclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG5cclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjbGFzc0VsZW1lbnQpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG5cclxuICAgIHRoaXMuX2NsYXNzRWxlbWVudCA9IGNsYXNzRWxlbWVudDtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jbGFzc0VsZW1lbnQuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cEVsZW1lbnQgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gcG9wdXBFbGVtZW50O1xyXG4gICAgXHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpIHx8XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwRWxlbWVudCwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cEVsZW1lbnQgfSk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcbiAgICBcclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4gKGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBpc0xvYWRpbmcoaXNMb2FkaW5nLCBidXR0b25UZXh0KSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBpc0xvYWRpbmcgPyBidXR0b25UZXh0IDogdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCB7IHNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+IEVMRU1FTlRTIH5+fn5+fn5+fn5+fn5+IC8vXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtbW9kYWxcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiZWRpdC1wcm9maWxlLWZvcm1cIl07XHJcblxyXG5jb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpXHJcbmNvbnN0IHByb2ZpbGVJbWFnZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLWVkaXRcIilcclxuY29uc3QgcHJvZmlsZUltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1pbWFnZS1tb2RhbFwiKTtcclxuXHJcbmNvbnN0IGRlbGV0ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtbW9kYWxcIik7XHJcblxyXG5jb25zdCBjYXJkTGlzdEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XHJcbmNvbnN0IGFkZENhcmRNb2RhbEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImFkZC1jYXJkLW1vZGFsLWZvcm1cIl07XHJcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn4gRlVOQ1RJT05TIH5+fn5+fn5+fn5+fn5+IC8vXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gcmVuZGVyQ2FyZChjYXJkRGF0YSk7XHJcbiAgcmV0dXJuIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwge1xyXG4gICAgaGFuZGxlSW1hZ2VDbGljazogKCkgPT4gaW1hZ2VQb3B1cC5vcGVuKGNhcmREYXRhKSxcclxuICB9LCBoYW5kbGVEZWxldGVDYXJkU3VibWl0LCB0b2dnbGVMaWtlQ2FyZCk7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVMaWtlQ2FyZChjYXJkKSB7XHJcbiAgICBpZighY2FyZC5faXNMaWtlZCkge1xyXG4gICAgICBhcGkuYWRkTGlrZUNhcmQoY2FyZC5faWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLnRvZ2dsZUxpa2VCdXR0b24oKTtcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFwaS5yZW1vdmVMaWtlQ2FyZChjYXJkLl9pZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNhcmQudG9nZ2xlTGlrZUJ1dHRvbigpO1xyXG4gICAgICB9KTtcclxuICAgICAgfVxyXG59XHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fn4gSEFORExFUlMgfn5+fn5+fn5+fn5+fn4gLy9cclxuLy8gLS0tLS0tLS0gUFJPRklMRSAtLS0tLS0tIC8vXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KGRhdGEpIHtcclxuICBwcm9maWxlRWRpdFBvcHVwLmlzTG9hZGluZyh0cnVlLCBcIlNhdmluZy4uLlwiKTtcclxuICBhcGkuZWRpdFVzZXJJbmZvKGRhdGEpXHJcbiAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XHJcbiAgICBuZXdQcm9maWxlSW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XHJcbiAgICBwcm9maWxlRWRpdFBvcHVwLmNsb3NlKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pXHJcbiAgLmZpbmFsbHkoKCkgPT4gcHJvZmlsZUVkaXRQb3B1cC5pc0xvYWRpbmcoZmFsc2UpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUltYWdlU3VibWl0KGRhdGEpIHtcclxuICBwcm9maWxlSW1hZ2VFZGl0UG9wdXAuaXNMb2FkaW5nKHRydWUsIFwiU2F2aW5nLi4uXCIpO1xyXG4gIGFwaS5lZGl0UHJvZmlsZUltYWdlKGRhdGEudXJsKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIG5ld1Byb2ZpbGVJbmZvLnNldFByb2ZpbGVJbWFnZShyZXMuYXZhdGFyKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgfSlcclxuICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICBwcm9maWxlSW1hZ2VFZGl0UG9wdXAuaXNMb2FkaW5nKGZhbHNlKTtcclxuICAgIHByb2ZpbGVJbWFnZUVkaXRQb3B1cC5jbG9zZSgpO1xyXG4gIH0pXHJcbn1cclxuXHJcbi8vIC0tLS0tLS0tLSBDQVJEIC0tLS0tLS0tLSAvL1xyXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGRhdGEpIHtcclxuICBjYXJkUG9wdXAuaXNMb2FkaW5nKHRydWUsIFwiU2F2aW5nLi4uXCIpO1xyXG4gIGFwaS5hZGRDYXJkKGRhdGEpXHJcbiAgLnRoZW4oKG5ld0NhcmQpID0+IHtcclxuICAgIGNyZWF0ZUNhcmQobmV3Q2FyZCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpXHJcbiAgfSlcclxuICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICBjYXJkUG9wdXAuY2xvc2UoKVxyXG4gIGNhcmRQb3B1cC5pc0xvYWRpbmcoZmFsc2UpO1xyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmRTdWJtaXQoY2FyZCkge1xyXG4gIGNhcmREZWxldGVQb3B1cC5vcGVuKCk7XHJcbiAgY2FyZERlbGV0ZVBvcHVwLnNldFN1Ym1pdENhbGxiYWNrKCgpID0+IHtcclxuICAgIGNhcmREZWxldGVQb3B1cC5pc0xvYWRpbmcodHJ1ZSwgXCJTYXZpbmcuLi5cIik7XHJcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjYXJkLmRlbGV0ZUNhcmQoKSwgY2FyZERlbGV0ZVBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IGNhcmREZWxldGVQb3B1cC5pc0xvYWRpbmcoZmFsc2UpKVxyXG4gIH0pXHJcbn1cclxuXHJcbi8vIH5+fn5+fn5+fn5+IEVWRU5UIExJU1RFTkVSUyB+fn5+fn5+fn5+fiAvL1xyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgY29uc3QgaW5mbyA9IG5ld1Byb2ZpbGVJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZUVkaXRQb3B1cC5zZXRJbnB1dFZhbHVlcyhpbmZvKVxyXG4gIHByb2ZpbGVFZGl0UG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgY2FyZFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5wcm9maWxlSW1hZ2VFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcHJvZmlsZUltYWdlRWRpdFBvcHVwLm9wZW4oKTtcclxufSlcclxuXHJcblxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+fn4gQVBJIH5+fn5+fn5+fn5+fn5+fn5+IC8vXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImJhNmY5NWYyLTdlM2EtNDE5Mi1iOWU0LTkzOTdmYzYxOGRlOVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICB9XHJcbn0pO1xyXG5cclxubGV0IGNhcmRTZWN0aW9uO1xyXG5cclxuYXBpLmdldEluaXRpYWxDYXJkcygpXHJcbi50aGVuKChjYXJkcykgPT4ge2NhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xyXG4gIGl0ZW1zOiBjYXJkcyxcclxuICByZW5kZXJlcjogY3JlYXRlQ2FyZCxcclxufSwgY2FyZExpc3RFbCk7XHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbn0pXHJcbi5jYXRjaCgoZXJyKSA9PiB7Y29uc29sZS5lcnJvcihlcnIpfSlcclxuXHJcbmFwaS5nZXRVc2VySW5mbygpXHJcbi50aGVuKCh1c2VySW5mbykgPT4ge1xyXG4gIGFwaS5lZGl0VXNlckluZm8oe3RpdGxlOiB1c2VySW5mby5uYW1lLCBkZXNjcmlwdGlvbjogdXNlckluZm8uYWJvdXR9KTtcclxuICBuZXdQcm9maWxlSW5mby5zZXRVc2VySW5mbyh1c2VySW5mbyk7XHJcbiAgbmV3UHJvZmlsZUluZm8uc2V0UHJvZmlsZUltYWdlKHVzZXJJbmZvLmF2YXRhcik7XHJcbn0pXHJcbi5jYXRjaCgoZXJyKSA9PiB7Y29uc29sZS5lcnJvcihlcnIpO1xyXG59KVxyXG5cclxuLy8gfn5+fn5+fn5+fn5+fn5+IENMQVNTRVMgfn5+fn5+fn5+fn5+fn5+IC8vXHJcblxyXG5jb25zdCBwcm9maWxlSW1hZ2VFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwcm9maWxlSW1hZ2VNb2RhbCwgaGFuZGxlUHJvZmlsZUltYWdlU3VibWl0KTtcclxuY29uc3QgbmV3UHJvZmlsZUluZm8gPSBuZXcgVXNlckluZm8ocHJvZmlsZVRpdGxlLCBwcm9maWxlRGVzY3JpcHRpb24sIHByb2ZpbGVJbWFnZSk7XHJcblxyXG5jb25zdCBjYXJkRGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKGRlbGV0ZU1vZGFsLCBoYW5kbGVEZWxldGVDYXJkU3VibWl0KTtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwcm9maWxlRWRpdE1vZGFsLCBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdCk7XHJcblxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHByZXZpZXdJbWFnZU1vZGFsKTtcclxuY29uc3QgY2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oYWRkQ2FyZE1vZGFsLCBoYW5kbGVBZGRDYXJkU3VibWl0KTtcclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIHByb2ZpbGVFZGl0Rm9ybSk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYWRkQ2FyZE1vZGFsRm9ybSk7XHJcblxyXG4vLyAtIENMQVNTIEVWRU5UIExJU1RFTkVSUyAgLy9cclxucHJvZmlsZUVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wcm9maWxlSW1hZ2VFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY2FyZERlbGV0ZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyB+fn5+fn5+fn5+fn5+fiBWQUxJREFUSU9OIH5+fn5+fn5+fn5+fn4gLy9cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7YmFzZVVybCwgaGVhZGVyc30pIHtcclxuICAgICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc30pXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZWRpdFVzZXJJbmZvKHt0aXRsZSwgZGVzY3JpcHRpb259KSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5hbWU6IHRpdGxlLFxyXG4gICAgICAgICAgYWJvdXQ6IGRlc2NyaXB0aW9uXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ2FyZCh7dGl0bGUsIHVybH0pIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBuYW1lOiB0aXRsZSxcclxuICAgICAgICAgIGxpbms6IHVybFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNhcmQoe19pZH0pIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7X2lkfWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICBhZGRMaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAudGhlbihyZXMgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcclxuICAgIH0gXHJcblxyXG4gICAgcmVtb3ZlTGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XHJcbiAgICB9IFxyXG5cclxuICAgIGVkaXRQcm9maWxlSW1hZ2UobGluaykge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgYXZhdGFyOiBsaW5rLFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gICAgfVxyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZUVsZW1lbnQsIGpvYkVsZW1lbnQsIHByb2ZpbGVJbWFnZUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX3RpdGxlID0gdXNlck5hbWVFbGVtZW50O1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSBqb2JFbGVtZW50O1xyXG4gICAgdGhpcy5fcHJvZmlsZUltYWdlID0gcHJvZmlsZUltYWdlRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgaW5mbyA9IHtcclxuICAgICAgdGl0bGU6IHRoaXMuX3RpdGxlLnRleHRDb250ZW50LFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGluZm87XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcclxuICB9XHJcblxyXG4gIGdldFByb2ZpbGVJbWFnZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9wcm9maWxlSW1hZ2Uuc3JjXHJcbiAgfVxyXG4gIFxyXG4gIHNldFByb2ZpbGVJbWFnZShsaW5rKSB7XHJcbiAgICB0aGlzLl9wcm9maWxlSW1hZ2Uuc3JjID0gbGluaztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cEVsZW1lbnQsIGhhbmRsZURlbGV0ZUNhcmRTdWJtaXQpIHtcclxuICAgICAgICBzdXBlcih7cG9wdXBFbGVtZW50fSlcclxuXHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG5cclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkU3VibWl0ID0gaGFuZGxlRGVsZXRlQ2FyZFN1Ym1pdDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRTdWJtaXRDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdENhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlU3VibWl0Q2FsbGJhY2soKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNMb2FkaW5nKGlzTG9hZGluZywgYnV0dG9uVGV4dCkge1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IGlzTG9hZGluZyA/IGJ1dHRvblRleHQgOiB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xyXG4gICAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwRWxlbWVudCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cEVsZW1lbnQgfSk7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX3RpdGxlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wYXJhZ3JhcGhcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKGNhcmREYXRhKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gY2FyZERhdGEubGluaztcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gY2FyZERhdGEubmFtZTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJfcmVmMiIsImhhbmRsZURlbGV0ZUNhcmRTdWJtaXQiLCJ0b2dnbGVMaWtlQ2FyZCIsIm5hbWUiLCJsaW5rIiwiX2lkIiwiaXNMaWtlZCIsImhhbmRsZUltYWdlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9pc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNhcmRTdWJtaXQiLCJfdG9nZ2xlTGlrZUNhcmQiLCJnZXRWaWV3IiwiX2NhcmRFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkTGlrZUJ0biIsIl9jYXJkRGVsZXRlQnRuIiwiX2NhcmRJbWFnZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiX2hhbmRsZUxpa2VzIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQ2xpY2siLCJ0b2dnbGVMaWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZGVsZXRlQ2FyZCIsInJlbW92ZSIsImFkZCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfaW5wdXRFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJlcnJvck1lc3NhZ2VFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImV2ZXJ5IiwiU2VjdGlvbiIsImNsYXNzRWxlbWVudCIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY2xhc3NFbGVtZW50IiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJhcHBlbmQiLCJQb3B1cCIsInBvcHVwRWxlbWVudCIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfc3VibWl0QnV0dG9uVGV4dCIsIl9pbnB1dHMiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsImlzTG9hZGluZyIsImJ1dHRvblRleHQiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlRWRpdEZvcm0iLCJmb3JtcyIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVJbWFnZSIsInByb2ZpbGVJbWFnZUVkaXRCdXR0b24iLCJwcm9maWxlSW1hZ2VNb2RhbCIsImRlbGV0ZU1vZGFsIiwiY2FyZExpc3RFbCIsImFkZENhcmRNb2RhbCIsImFkZENhcmRNb2RhbEZvcm0iLCJhZGRDYXJkQnV0dG9uIiwicHJldmlld0ltYWdlTW9kYWwiLCJjcmVhdGVDYXJkIiwiY2FyZERhdGEiLCJjYXJkIiwiaW1hZ2VQb3B1cCIsInJlbmRlckNhcmQiLCJjYXJkU2VjdGlvbiIsImFwaSIsInJlbW92ZUxpa2VDYXJkIiwidGhlbiIsImFkZExpa2VDYXJkIiwiY2FyZERlbGV0ZVBvcHVwIiwic2V0U3VibWl0Q2FsbGJhY2siLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImZpbmFsbHkiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImluZm8iLCJuZXdQcm9maWxlSW5mbyIsImdldFVzZXJJbmZvIiwicHJvZmlsZUVkaXRQb3B1cCIsImFkZEZvcm1WYWxpZGF0b3IiLCJjYXJkUG9wdXAiLCJwcm9maWxlSW1hZ2VFZGl0UG9wdXAiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsImVkaXRVc2VySW5mbyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiYWRkQ2FyZCIsIl9yZWYzIiwidXJsIiwiX3JlZjQiLCJjYXJkSWQiLCJlZGl0UHJvZmlsZUltYWdlIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsImNhcmRzIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInNldFByb2ZpbGVJbWFnZSIsInVzZXJOYW1lRWxlbWVudCIsImpvYkVsZW1lbnQiLCJwcm9maWxlSW1hZ2VFbGVtZW50IiwiX3RpdGxlIiwiX2Rlc2NyaXB0aW9uIiwiX3Byb2ZpbGVJbWFnZSIsImdldFByb2ZpbGVJbWFnZSIsImNhbGxiYWNrIiwiX2hhbmRsZVN1Ym1pdENhbGxiYWNrIiwidXNlckRhdGEiLCJfaW1hZ2VFbGVtZW50IiwiX3RpdGxlRWxlbWVudCIsIm5ld0NhcmQiXSwic291cmNlUm9vdCI6IiJ9